Add-Migration -Name FromEmailInMessage -ConfigurationTypeName MigrationConfiguration -ConnectionStringName Messanger -ProjectName ShareDeployed.DataAccess -StartUpProjectName ShareDeployed.DataAccess -Verbose -Force
Update-Database -TargetMigration RenemaChantUsersToMessangreUsers -ConfigurationTypeName MigrationConfiguration -ConnectionStringName Messanger -ProjectName ShareDeployed.DataAccess -StartUpProjectName ShareDeployed.DataAccess -Verbose -Script

IF EXISTS (select * from sysdatabases where name='ShareDeployed')
BEGIN TRY
	DROP DATABASE Messanger
END TRY
BEGIN CATCH
END CATCH
GO

IF NOT EXISTS (select * from sysdatabases where name='ShareDeployed')
BEGIN TRY
	CREATE DATABASE [ShareDeployed];
END TRY
BEGIN CATCH
END CATCH
GO

Use [Messanger];
GO

CREATE TABLE [dbo].[Expenses] (
    [Id] [int] not null identity,
    [UserId] [int] not null,
    [Name] [nvarchar](max) not null,
    [Time] [datetime] not null,
    [Amount] [decimal](18, 2) not null,
    [IsRequired] [bit] not null,
    [Description] [nvarchar](max) null,
    primary key ([Id])
);
GO
CREATE TABLE [dbo].[Revenues] (
    [Id] [int] not null identity,
    [UserId] [int] not null,
    [Name] [nvarchar](max) not null,
    [Time] [datetime] not null,
    [Amount] [decimal](18, 2) not null,
    [Description] [nvarchar](max) null,
    primary key ([Id])
);
GO
CREATE TABLE [dbo].[Users] (
    [Id] [int] not null identity,
    [Name] [nvarchar](max) not null,
    [LogonName] [nvarchar](max) null,
    primary key ([Id])
);
GO
CREATE TABLE [dbo].[Words] (
    [Id] [int] not null identity,
    [UserId] [int] not null,
    [ForeignWord] [nvarchar](max) not null,
    [Translation] [nvarchar](max) not null,
    [Complicated] [bit] not null,
    primary key ([Id])
);

IF EXISTS (select * from sysdatabases where name = 'ShareDeployed')
BEGIN TRY
ALTER TABLE [ShareDeployed].[dbo].[UserProfile] ADD [Email] [nvarchar](max) NOT NULL DEFAULT ''
END TRY
BEGIN CATCH
END CATCH

http://pastebin.com/j6RTBkdA

----------------------------------------------------------- Messanger _____________________
IF EXISTS (select * from sysdatabases where name='Messanger')
BEGIN TRY
	DROP DATABASE Messanger
END TRY
BEGIN CATCH
END CATCH
GO

IF NOT EXISTS (select * from sysdatabases where name='Messanger')
BEGIN TRY
	CREATE DATABASE [Messanger];
END TRY
BEGIN CATCH
END CATCH
GO

Use [Messanger];
GO

CREATE TABLE [MessangerClients] (
    [Key] [int] NOT NULL IDENTITY,
    [Id] [nvarchar](max),
    [LastActivity] [datetimeoffset](7) NOT NULL,
    [UserAgent] [nvarchar](max),
    [User_Key] [int] NOT NULL,
    CONSTRAINT [PK_MessangerClients] PRIMARY KEY ([Key])
)
CREATE INDEX [IX_User_Key] ON [MessangerClients]([User_Key])

CREATE TABLE [ChatUsers] (
    [Key] [int] NOT NULL IDENTITY,
    [Id] [nvarchar](200),
    [Name] [nvarchar](max),
    [Hash] [nvarchar](max),
    [Salt] [nvarchar](max),
    [HashedPassword] [nvarchar](max),
    [LastActivity] [datetime] NOT NULL,
    [LastNudged] [datetime],
    [Status] [int] NOT NULL,
    [Note] [nvarchar](200),
    [AfkNote] [nvarchar](200),
    [IsAfk] [bit] NOT NULL,
    [Flag] [nvarchar](2),
    [Identity] [nvarchar](max),
    [Email] [nvarchar](max),
    [IsAdmin] [bit] NOT NULL,
    [IsBanned] [bit] NOT NULL,
    CONSTRAINT [PK_ChatUsers] PRIMARY KEY ([Key])
)

CREATE TABLE [MessangerGroups] (
    [Key] [int] NOT NULL IDENTITY,
    [LastNudged] [datetime],
    [Name] [nvarchar](200),
    [Closed] [bit] NOT NULL,
    [Topic] [nvarchar](80),
    [Welcome] [nvarchar](200),
    [Private] [bit] NOT NULL,
    [InviteCode] [nchar](6),
    [Creator_Key] [int],
    CONSTRAINT [PK_MessangerGroups] PRIMARY KEY ([Key])
)
CREATE INDEX [IX_Creator_Key] ON [MessangerGroups]([Creator_Key])

CREATE TABLE [Messages] (
    [Key] [int] NOT NULL IDENTITY,
    [Id] [nvarchar](max),
    [Subject] [nvarchar](max),
    [From] [nvarchar](max),
    [CC] [nvarchar](max),
    [Content] [nvarchar](max),
    [When] [datetimeoffset](7) NOT NULL,
    [Room_Key] [int],
    [User_Key] [int],
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Key])
)
CREATE INDEX [IX_Room_Key] ON [Messages]([Room_Key])
CREATE INDEX [IX_User_Key] ON [Messages]([User_Key])

CREATE TABLE [GroupMessageUser1] (
    [ChatRoom_Key] [int] NOT NULL,
    [ChatUser_Key] [int] NOT NULL,
    CONSTRAINT [PK_GroupMessageUser1] PRIMARY KEY ([ChatRoom_Key], [ChatUser_Key])
)
CREATE INDEX [IX_ChatRoom_Key] ON [GroupMessageUser1]([ChatRoom_Key])
CREATE INDEX [IX_ChatUser_Key] ON [GroupMessageUser1]([ChatUser_Key])

CREATE TABLE [GroupMessangerUsers] (
    [ChatRoom_Key] [int] NOT NULL,
    [ChatUser_Key] [int] NOT NULL,
    CONSTRAINT [PK_GroupMessangerUsers] PRIMARY KEY ([ChatRoom_Key], [ChatUser_Key])
)
CREATE INDEX [IX_ChatRoom_Key] ON [GroupMessangerUsers]([ChatRoom_Key])
CREATE INDEX [IX_ChatUser_Key] ON [GroupMessangerUsers]([ChatUser_Key])

CREATE TABLE [MessangerUserGroups] (
    [ChatRoom_Key] [int] NOT NULL,
    [ChatUser_Key] [int] NOT NULL,
    CONSTRAINT [PK_MessangerUserGroups] PRIMARY KEY ([ChatRoom_Key], [ChatUser_Key])
)
CREATE INDEX [IX_ChatRoom_Key] ON [MessangerUserGroups]([ChatRoom_Key])
CREATE INDEX [IX_ChatUser_Key] ON [MessangerUserGroups]([ChatUser_Key])

ALTER TABLE [MessangerClients] ADD CONSTRAINT [FK_MessangerClients_ChatUsers_User_Key] FOREIGN KEY ([User_Key]) REFERENCES [ChatUsers] ([Key]) ON DELETE CASCADE
ALTER TABLE [MessangerGroups] ADD CONSTRAINT [FK_MessangerGroups_ChatUsers_Creator_Key] FOREIGN KEY ([Creator_Key]) REFERENCES [ChatUsers] ([Key])
ALTER TABLE [Messages] ADD CONSTRAINT [FK_Messages_MessangerGroups_Room_Key] FOREIGN KEY ([Room_Key]) REFERENCES [MessangerGroups] ([Key])
ALTER TABLE [Messages] ADD CONSTRAINT [FK_Messages_ChatUsers_User_Key] FOREIGN KEY ([User_Key]) REFERENCES [ChatUsers] ([Key])
ALTER TABLE [GroupMessageUser1] ADD CONSTRAINT [FK_GroupMessageUser1_MessangerGroups_ChatRoom_Key] FOREIGN KEY ([ChatRoom_Key]) REFERENCES [MessangerGroups] ([Key]) ON DELETE CASCADE
ALTER TABLE [GroupMessageUser1] ADD CONSTRAINT [FK_GroupMessageUser1_ChatUsers_ChatUser_Key] FOREIGN KEY ([ChatUser_Key]) REFERENCES [ChatUsers] ([Key]) ON DELETE CASCADE
ALTER TABLE [GroupMessangerUsers] ADD CONSTRAINT [FK_GroupMessangerUsers_MessangerGroups_ChatRoom_Key] FOREIGN KEY ([ChatRoom_Key]) REFERENCES [MessangerGroups] ([Key]) ON DELETE CASCADE
ALTER TABLE [GroupMessangerUsers] ADD CONSTRAINT [FK_GroupMessangerUsers_ChatUsers_ChatUser_Key] FOREIGN KEY ([ChatUser_Key]) REFERENCES [ChatUsers] ([Key]) ON DELETE CASCADE
ALTER TABLE [MessangerUserGroups] ADD CONSTRAINT [FK_MessangerUserGroups_MessangerGroups_ChatRoom_Key] FOREIGN KEY ([ChatRoom_Key]) REFERENCES [MessangerGroups] ([Key]) ON DELETE CASCADE
ALTER TABLE [MessangerUserGroups] ADD CONSTRAINT [FK_MessangerUserGroups_ChatUsers_ChatUser_Key] FOREIGN KEY ([ChatUser_Key]) REFERENCES [ChatUsers] ([Key]) ON DELETE CASCADE

CREATE TABLE [__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [CreatedOn] [datetime] NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK___MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject '__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH

INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) VALUES ('201211201617208_MessangerStart', '2012-11-24T23:48:55.775Z', 0x1F8B0800000000000400ED1DCB6EE436F2BEC0FE4343A7EC0271DBBDC0C019B41378DAE3ACB1B13D703BC971404B6C591B3D7A25B6C7FEB63DEC27ED2F84D483CDA744EAD5EA642E83698A2C168B55C562B1AAFCFFFFFE6FF9C36B14CE5E609A05497CE19C9D9C3A3318BB8917C4FE85B3439B6FCF9D1FBEFFEB5F961FBDE875F64BD56F41FAE1917176E13C23B47D3F9F67EE338C407612056E9A64C9069DB84934075E325F9C9E9ECFCF4EE710837030ACD96CF9B08B5110C1FC07FEB94A62176ED10E84B78907C3AC6CC75FD639D4D91D8860B6052EBC70D6CF208557701B266FD03BB902085CBA2ECC326776190600E3B386E1C612B9D3EF08720E9D164FFC112388DE1EDFB6309FFCC2B9C57380D887E92A0C608CD8CEB8FBBFE01BD7809B3EA5C916A6E8ED016E4A10B893339BF303E7E2483A8E1D44F0B8706E62F48F8533BBDB8521780A71C30684197466DB77EFD72849E18F30862940D0FB04108229DEA71B0FE6EB28E9F17EFBCE8C24DFCD4F1784247310C70902086FBA84B980E78D57A1B94629E61E67761DBC42EF2718FBE899A27A0B5EAB16FC5F67F6731C6066C38350BA83ECD28ADFF553FE043274E9A2E0255F6131396608F88859EB7EB3C9205210AB1EE4CF194C2F7DB2BF632F86CC6CB0D702903BF012F8F9FE28C039B30718E61FB3E7605B48C689C0C79F8B8ED769123D24A1CCE7F9F7CFEB6497BA78F6C7A4A6D323487D427216C5E57C2F4866E295E3F355B83A0A179EA6233F927F4717827F82EC79F449D7201C5FDCC94A092F65D997249D96EAB4569A04D8DDCEF3A15707CA682BB038EC324B1D28326E826C19B7BBB45C6E7E3BC8BC37199EB99AF54382953388AD29761D02DF16F3AE7853DD3932E37F8C40108E3E2BDE262F0AE2AE1B75937DC067C65ECC8CE168CD046C79C7D0C5A75A719067FD990C9535506B3254768529BAF75FF0EA7F4C93DDB601D3BCCF67D23DCD94A8B21DF4B872BD6C9135C793D0A20ECDFC7B139645275B242FC330F96243D3724013CA6CB726CCB9BEAA05D85B9139E0AF66E46007750BEBB0FB61B70A93AC85F213A03C26DBC0B5C4FDBC2BEABFC2106FDDF824FB94062F606F97B43E78626C28C21546A376050546CC02DE75DDF114022C3575F2A504D3A4EE4AED358CB6D35E966B34A3F1795D10C40475DA558B75D9A309E1AA9B2DAED5E9DBDF39DD80A8709A9BE29943F1610DA63EFC5C1C282286D507F50947BFDA1ECAC6EC69663834904DCF8976E7AE0FBF1EB887778AAE774FFFC616FDE8F3121E1C7DD2D56AFC2993181DC23FFCEB338C45ABADA593FB214922EB23D5D25D6D772C97DAB5BDFE55AA38493BF7E33CC7609537E0B25D8B8BB593FC32CB1237C87150DE6F78EB845FDBC7D89B59982A052FCB270C66E25D88826D18B818C10BE7EF1211CD26A2E7A362A28298B5F32CE70C2DAC4854594186484B26D1008411ED29539A9C9E9C9C49B3E08314A6E43C0321D64C194A411023F9D40D6237D882D0082161B4E9A94D76894E247EB9825B189373D788EC2618B0570319113A9F60583491AB3DA39536AC210F8806ED006C26FAB6C6913CAAAA6BB194F5B6809D0FAD572EDBE2A644ED59B0444446932791AA2613535BE07032549DA74DBBCB1FAEBD300CEFA93E8C1E16D018935B588A9ACC4B8DBE29285C2BAB677873E760760EFB28D388AB32A843816B19E4D4861CCA472043729C896CB8BC8FAF6008119C91D76A127AB602990B3CF96E816D68AF4FD348B18C510D23C54E4D4D448B5B0BB910E31130951893DC945FC548B962D01A22EAD42F1F1EF777201D334ABCC7432A9D617A3805C73540A95EC2F4604A4DD10067EF555443F2651666C82CC0D139A4991106FE6B9123ECEE8874817B1A493C667719642096EB11659AA7883DB5A80FBC9150CA7BA2CD4DB11379C42BE1F094A95CEE8D8451DD6B2C6E369DC8225C6186A2CADEBDA4A186FA526370AD6130DEEB83A6F54B1799461A765878A113F5EB96CD8A66DBBCEDAA399361781130D5A196CAB347AD399EBAE4227B6A28A23536CDCD4D6619F4EC372189CAAEEC4092CAE94ACD17FA6D392FB20ECA86E55C939EB0BC05DB6D10FB4CBA42D9325B17B90AAB6FD7F69908510163EE668A84048A2D9D091F1B587684AFE499C283D7419A219221F104C8A3C0CA8BA46EA6C65A351D6FB3C9BB56593A557FF2FFF25D4A93B7219979B2955B02BBC60B8D88A59CBFEB894AA60EC28C24928010A4AA67C45512EEA2B8C67AD78F27CF7BEC70F2DB7C341F83CBC2E1BF984364B21758704CB31D2C893EB9F06988B49C0BFB245D4024F6906E703CB719F1A24E3B77E144957AB3E143F5F869726111C9C58E2F5ACC211441FB2C84A2C51C421181CF42285AEC7060C3E9456CD86F87945036024F8457B55BD0AD0C97E72857B65970401EB8CE7140DE620E8146BFB34068A3052717D1EC1C33174DE6308A60761644D162234F557C082F5555AB39A432D89C05533659D1A4081D17A85234DAC0A962C7794055EB64147A6926F7ABD195D7371B95AE0130944EEF574F74D7F155E82D0BA36A33875286DEB240CA26731834929685421BCDE1D0C858160E6DB4902B263496932CA6DD82CECCAB3647EBD241342DDB8BDEEEFB1356318830076724A5AA91D334B968881E776E578D16475D1E72C71D75798B05BBAD04365B598DAE42E1381055A38548E7A16D9C3CE72DE610E82B360B8434EA04E6686E3DBCFF42217EBAA701EBD351185F7F12D65E7588F74615635DFFC02093D64C7457CF00E9B73A7F17AC4074C353FB0A688EA79E93F4788A3EACAE6C5279FEED19A41A69C11AF2836E23CDF90784297205FF2C71ECFCD05A5FD82B8A853D374C5E454C5C37486E6EB10B3DC0A8BB5B706B2F4B177373691EC9E75C74716618F797C023FEE6F55B86609433D5C9FA3F61F5B25F75B80571B081197A4C7E83719EFF76DEBEAE0FCDD7C8322F9C7C719F80D0A13163C5366F8FE69FC42F2075B1607F1381D7BFF5512DC2C318921A4E494F85763A21B8971D8698B5181D4F619A9118434E3C6D9F11DC692FD91A309D00B1755D3A6324D76A194CA27AA8BFA202655F7FA5598A146CC05441E98BB584E22A7D81E56AA73C05F66B65EBA6A891EA5A16A5138F71A54E3A4112CA97B4A19558BAA419C611157D184445F727D52AD5DC5578F85A0C6D3882ABC3A044EBDC1A2BA1CC425F8B15AA28B4E27FA982422C61F6AE6579841ACB4786720C39DD53B68585FCEA4EB0D89CE94E80F679D0DDC0F0B9CD9D60B1F9CA1DEF0AFBABBB218F5B5F10BA8A89895FD44C741A5C15EA013AD741B3D0F1D3B537FB782C86BB84357A18BF5279102A2FBE52B92595FBCADC2A42730F9248A50DC6ED963BD62D3F4B13A337784696711696CE973B7EA6A4710D043B1E53E6C1EA62D93B255D1E1BA7E8A28DB4550C0ECD2B6659FB6D36D38449FC96F9DC3DD4BE1833DDDA381F7F02DC30C499345D561857431872C2B4CE90C6888D3E94C5D0568BE28AA647CE266FFFD89491591C4F1BA3FED0ACA97A889FBE393D5DC63C90F1D48E2FA7A5326B02998E53599E9932E5D99F425D4A1B7024FAB2267CED1835E574B8720ABAD29C29A7A52CFF6886E5C2942B177F0A5D29457E1E89AEFC631995D361CA29A84A739E1C55550AF1BAF46956ACE720EEBFA2FC14EB8DDFBF4EE8FCF545B4EE85E33D25984F8A870EA1935C60433B6FC1F1FA598BEFAA392B8A5B4C562A7DFD6C6587DA256A6AEB2827F5615D5D2FED348A4A380D8B32A6A7AAB70A8F7D3F1F9656517B84CEEC303A6B42A9EAD8894A0B3BA4160D6C41FA6858E3203575584650949D905554CDF35D4D1115E9C899642DB63E88C1290F55D6774FA4E8ADCC581BA4D5AE76450E6D7F8BEDA3B4581F7B3CEC42EB5DE476151A35794EC3EC7FFD11D398F3392CF9AA025F76E45367610DAA3726423CA1EAA26155C709F0DB9929CD643BA52FA219F35A6DDEE7785C764892592AB7A968B58529C9164391CC98C9A6A1C906219845C94539E714DFA8773109222E7E5DC12CF0F72096E51FB265EFD2B4CF4DBC49AA8BBD8051D545CAF145C02389CF290A36C045F833C980CEFFD2D32F20DC41925DF304BD9BF87E87B63B84970CA3A790731010D740DDFC795D491EE7E5FD36FF83437D2C01A31990B8EBFBF8C32E083D8AF7B52274510382F81CCA007CB2978804E2FB6F14D25D121B022AC9475D258F30DA861858761FAFC10BD4E3D64C439E62CBAB00F82988580A162D342710CFCC4C81276047ECE7C33F31BB7AD1EBF7BF03D7C40E3B26850000, '4.3.1')
ALTER TABLE [Messages] ADD [IsNew] [bit] NOT NULL DEFAULT 0
INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) VALUES ('201211210925387_IsNewInMessage', '2012-11-24T23:48:55.838Z', 0x1F8B0800000000000400ED1DDB6EE336F67D81FD07434FDD051A275E60900E9C161967D20DB6490671DA3E0E188956B4D5C52BD199E4DBF6613F697FA1A42E34AF12A99BE5765E06638A3C3C3C3C3792E79CFCFFBFFF5BFEF01A85B317986641125F386727A7CE0CC66EE205B17FE1ECD0E6DB73E787EFFFFA97E5472F7A9DFD52F55B907E78649C5D38CF086DDFCFE799FB0C23909D44819B2659B241276E12CD8197CC17A7A7E7F3B3D339C4201C0C6B365B3EEC62144430FF817FAE92D8855BB403E16DE2C1302BDBF197750E75760722986D810B2F9CF53348E115DC86C91BF44EAE000297AE0BB3CC995D8601C0F8AC61B8B144EEF43B829C43A7C5137FC408A2B7C7B72DCC27BF706EF11C20F661BA0A031823B633EEFE2FF8C635E0A64F69B285297A7B809B1204EEE4CCE6FCC0B938928E6307113C2E9C9B18FD63E1CCEE7661089E42DCB00161069DD9F6DDFB354A52F8238C610A10F43E0184608AF7E9C683F93A4A7ABCDFBE3323C977F3D30521C91CC4718200C29B2E612EE079E35568AE518AB9C7995D07AFD0FB09C63E7AA6A8DE82D7AA05FFD799FD1C0798D9F02094EE20BBB4E277FD943F810C5DBA2878C957584C8E19023E62D6BADF6C328814C4AA07F97306D34B9FECEFD88B21331BECB500E40EBC047EBE3F0A70CEEC0186F9C7EC39D816927122F0F1E7A2E3759A440F4928F379FEFDF33AD9A52E9EFD31A9E9F408529F909C457139DF0B929978E5F87C15AE8EC285A7E9C88FE4DFD185E09F207B1E7DD23508C71777B252C24B59F62549A7A53AAD95260176B7F37CE8D58132DA0A2C0EBBCC52078A8C9B205BC6ED2E2D979BDF0E32EF4D8667AE66FD9060E50C626B8A5D87C0B7C5BC2BDE54778ECCF81F231084A3CF8AB7C98B82B8EB46DD641FB0CDD88B99311CAD9B803DEF18BAD8AA15863CEBCF65A8BC815A97A1F22B4CD1BDFF8257FF639AECB60D98E67D3E93EE69A64495EDA0C795EB658BAC399E84167568E6DF9BB02C3AD922791986C9171B9A96039A5066BB3561CEF5552DC0DE8BCC017F75230733D42DBCC3EEC66E1526590BE52740794CB6816B89FB7957D47F8521DEBAF149F6290D5EC0DE2F696D7862EC28C21546A376050546CC02DE75DDF114022C3575F2A504D3A4EE4AED358CB6D31E966B34A3B1BD2E0862823AEDAAC5BAECD18470D5CD16D7CAFAF667A71B1015ACB9299E39141FD660EAC3CF85411131AC3EA82D1CFD6A6B948DD9D3CC7168209B9E13EDECAE0FBF1ADCC35F8AAE774FFFC61EFDE8F3121E1C7DD2D56AFC2993181DE27EF826BB835FBADAF15F9F612CBA7E2D6FCA1F9224B2B6CB9677DE76B6BD54D1ED95B8524F4A2ABE9F1B780C56798C2EDBB5B858DFB45F6659E206390ECA4312EFE2F06BFB187B330B7FA71008D94C6149D88528D886818B11BC70FE2E11D16C226A64151315C4AC9D673967686145A2CA9532445AF2AB06208CE89499D2E4F4E4E44C9A055B639812A30842ACDE3294822046B2E90E6237D882D0082161B4A9E927BB442712BF5CC12D8C89F13622BB0906ECF9424684CE2778274DE46ACF68A5236CC803A2573C009B891764E3481E55D5B558CA7A5BC0CE87D62B971D7A53A2F62C582222A3C99348559389A92F703819AAEC69D3EEF2C6B51786E1AFBB0FA3870534C6E41696A226F352A76F0A0AD7CAEB19DEDD39989FC3BEEC34E2AA8C0C51E05A464AB52187F225C9901C67221B2EEFE32B18420467E4C99BC4AFAD40E6024F3E5B601FDAEBD335522C6354C748B1535313D1E2D4424ED578044C25C624C7ED5731DCAE18B48688BE0C94AF97FB33908E1925DEE32195376A7A3805C73540A99ED3F4604A4DD100677F35A986E4CB2CCC905980A3BBD56646185C828B1C617746A40BDCD348E231BBC32003B15C8F28D33C45ECA9452FD21B09A53C27DA9C143B91473C120E4F99EADEBE9130AA738DC5C9A613598423CC5054D95F2F69A8A13ED4181C6B188CF7FAA069FDD241A691861D165EE844FDBA65B7A2D9376FBB6ACE65185E044C75A8A5F2EC516B8EA72EB9F0A01A8A689D4D7377935906B5FD262451F9951D48525DBA52F7857E5BCE8BD485B26139D7E4382C6FC1761BC43E93F350B6CCD645C2C3EADBB57D3A4354C098BB9922AB81624B67C26603CB8EF095BC7578F03A483344D22C9E007914587991D4CDD459ABA6E37D3679D72A4FA7EA4FFE5F3E6E69923F24374FF6724B60D778A111F194F3C74151C9D44198916C14108254F516B94AC25D14D778EFFAF1E48D901D4E7E9B8FE603795938FC1773884C0A040B8E69B68325D127173E0D919673619FA40388C41ED2098EE736235ED469E72E9CA8526F367CA81E3F4D2E2CC2C1D8F1458B398422F29F8550B4984328C2F85908458B1D0E6C4CBE880DFBED9012CA86F189F0AA760BBA9531F71CE5CA360B0EC8A3DF390EC85BCC21D0107A16086DB4E0E422249E63E6A2C91C461111CF82285A6CE4A90A32E1A5AA6A35875446ACB360CA262B9A14F1E702558A461B3855003A0FA86A9D8C422FDDE47E35BAF2F866A3D2350086D2E9FDEA89EE3ABE8ADF6561546DE650CAF85D1648D9640E8386E3B25068A3391C1A5ECBC2A18D1672C5C4D77292C5B45BD09979D5E6685D5E104DCBF7A2A7FBFE84558C44CCC11949A96AE4345D2E1AE7C7D9EDAAD1C2D4E5717B9CA9CB5B2CD86D25B0D9CA6A74154FC781A81A6D4C531E1FC7DBA5BCC9422DE4E1719C4EC85BCC21D09770160869D409DDD19C9CF83B108508EB9E17AC2DAC30BEDE9AD61E97C80D902AD8BBFE914226AD99F8AF9E01D26F75FEB65881E886A7F625D11C4F3D27E9F114EFC1BAB249F57A60CF20D5480BD6901F851B69CE3F424C912BF8A78D63E787D6FAC25E512CECB961F22A62E2BA41BA2A17BB500346AFCC85ABF165794DDD5C2348BAB72EBA38338CFB4BE0913BEBF55B86609433D5C9FA3F61151D5075B80571B081197A4C7E83719E8877DEBEC0104D1CC9322F9C7C95A180D0A13175C636819026C2C42F2075B1607F1381D7BFF551B6C2C318926252494F157F3A21B8971D8698B5181D4F859C911843CE806D9F9ADC692FD962349D00B105663A6324178D194CA27A2804A302655F08A6598A146CC09463E98BB5842A2F7D81E58AB83C05F66B650BB8A891EA5A9FA5138F7135573A4112EAA8B4A1955843A519C611559F184445F727D52AD5DC5578F8A2106D38822B08A144EBDC1A2BA1DE435F8B15CA39B4E27FA994432C61F6AE659D861ACF4786720CC9E553F6858544EF4EB0D8E4ED4E80F609D9DDC0F049D61D6D069338DD4662D8A4E98E878DFDD9DF5048AC4F185DE5CCE462D54CF61AEE3AD40374770FCD52CB4FD7DE6FE4B118EE14D77845F995CA835079F195CA2DA9DC57FA58111F7C906C2E6D4470B704B66E49629A40C1C1D3C28C53C17497C1E3A76B1A1762B0E3316532AE2EA0BE53E6E7B1718A2EE4495B4AE1D0BC62563AA0CD669A3089DF32A9BC87021C63E67C1B17059800370C6193A6CB0AE36A08434E98960D690CF9E843590CEDB5288E687AE46C8A071C9B32320B046AE3D41F9A35552FF9D377A7A7CB9807729EDAF1E5B454664D24D4712ACB3353A63CFB53A84B69038E445FD6C4BF1DA3A69C0E574E41579A33E5B494E51FCDB15C9872E5E24FA12BA5D0D123D1957F2CA7723A4C39055569CE93A3AA4A21E097BEED8A4525C4FD57D4C0626FE3F7AF13BAFBFA22DCF7C2F19E12CC27C54387D049AEF2A19DB7E078FDACC577D59C15C52D262B95BE7EB6B243ED1235057E9493FAB0AEB898761A45399E864519D353D55B85C7BE9F0F4BAFA83D426776189D35A15475EC44A5851D528B06B6207D34AC7190C23E2C23286A5FC82AAAE6F9AEA6928B6472265910AE0F6270CA43957ADE13297AAB75D60669F555BB2291B7BFC5F651DFAC8F3D1E76A1F557E4766522358952C3EC7FBD89694C1A1D967C5595313BF2A9D3B806D51B13219E50FAD1B0B4E404F8EDCC9466B29FD217D18C79AD3671743C2E3B24C92C95DB54B4DAC294648BA14866CC64D3D0648310CCA2EEA39CB48A4FD4BB98041117BFAE6016F87B10CBF24FF2B26769DAE726DE24D5C15EC0A8EA22250923E091CCE914051BE022FC99A450E77FB3EA1710EE2049CF7982DE4D7CBF43DB1DC24B86D153C85D1090AB81BAF9F3E2963CCECBFB6DFE578FFA580246332071D7F7F1875D107A14EF6B45E8A20604B9732823F8C95E2212C9EFBF514877496C08A8241FBD2A7984D136C4C0B2FB780D5EA01EB7661AF2145B5E05C04F41C452B068A149857866660A3C013B623F1FFE89D9D58B5EBFFF1DE024C346F0850000, '4.3.1')
ALTER TABLE [Messages] ADD [FromEmail] [nvarchar](max)
INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) VALUES ('201211231441414_FromEmailInMessage', '2012-11-24T23:48:55.869Z', 0x1F8B0800000000000400ED1DCB6EE436F2BEC0FE4343A7EC0271DBBDC0C019B41378DAE3ACB1B13D703BC971404B6C591B3D7A25B6C7FEB63DEC27ED2F84D483CDA744EAD5EA642E83698AAC2A16AB8A45B2AAFCFFFFFE6FF9C36B14CE5E609A05497CE19C9D9C3A3318BB8917C4FE85B3439B6FCF9D1FBEFFEB5F961FBDE875F64BD56F41FAE1917176E13C23B47D3F9F67EE338C407612056E9A64C9069DB84934075E325F9C9E9ECFCF4EE710837030ACD96CF9B08B5110C1FC07FEB94A62176ED10E84B78907C3AC6CC75FD639D4D91D8860B6052EBC70D6CF208557701B266FD03BB902085CBA2ECC326776190600D3B386E1C692B8D3EF08710E458B117FC404A2B7C7B72DCC915F38B71807887D98AEC200C688ED8CBBFF0BBE710DB8E9539A6C618ADE1EE0A604813B39B3393F702E8EA4E3D841848E0BE72646FF5838B3BB5D1882A710376C40984167B67DF77E8D9214FE0863980204BD4F002198E275BAF1603E8F921FEFB7EFCC58F2DDFC7441583207719C2080F0A24B940B74DE7815996B9462E97166D7C12BF47E82B18F9E29A9B7E0B56AC1FF75663FC70116363C08A53BC84EADF85D8FF22790A14B17052FF90C0BE45820E02316ADFBCD268348C1AC7A903F6730BDF4C9FA8E3D1982D960AD052077E025F0F3F5518073660F30CC3F66CFC1B6D08C13418E3F171DAFD3247A484259CEF3EF9FD7C92E7531F6C7A4A6D323487DC27296C4E57CAF4866EA95D3F355B93A2A1746D3511EC9BFA32BC13F41F63C3AD23508C757773253224B59F62549A7653AAD8D260176B7F37CE8D581325A0AAC0EBBCCD2068A829B205BC1EDAE2D979BDF0E82F726C3982BAC1F126C9C416CCDB1EB10F8B69477A59BDACE9105FF6304827074AC7899BC2888BB2ED44DF601EF197B353386A37513B0E71D4317EF6AC5469EF5E73254DE40ADCB50F915A6E4DE7FC1B3FF314D76DB064AF33E9F49F7345392CA76D0D3CAF5B225D69C4EC28B3A32F3EF4D54169D6C89BC0CC3E48B0D4FCB014D24B3DD9A28E7FAAA2660EF45E680BFBA91836DD42DBCC3EE9BDD2A4CB216C64F80F2986C03D792F6F3AEA4FF0A43BC74E3B3EC531ABC80BD5FD27AE389B1A30857988CDA191414311378D775C55308B0D6D4E997124C93B92BADD730D64E7B58AEB18CC6FB75C11013D269572DD5658F2682AB6EB6B456BB6F7FFB7403A1C26E6E4A670EC5873594FAF073B1A18814561FD43B1CFD6ABB291B8BA799E3D0C036BD24DAEDBB3EFCBAE11EFE5274BD7BFA37F6E847C74B64F020480F73A25BADC64799C4E81037D337D91DFCD2D583F8F519C6A2D3D9F28EFE2149226B8FC0F2B6DDCEAB283787F6DB87D2424B9B4B3F77FF18ACF2005FB66B69B1BEE3BFCCB2C40D721A94C733DEB9E2E7F631F666169E56A110F20689356117A2601B062E26F0C2F9BBC4443344747B57202A98598B6739677861C5A2CA8933245AF2E806608CE80E9AF2E4F4E4E44CC282FD009892ED1884D8BC652805418C64A72188DD600B42238284D1A64E0759258A48FC7205B730266E8311DB4D28604F363221149FE01735B1ABBDA0952EB8A10C88FEF80062265ECD8DA379D454D75229DB6D813A1F5ACF5C3E4A9832B567C51209194D9F44AE9A20A6BEC0E174A8DA4F9B5697DF5C7B1118FEA2FD30765820634C6961396A82973A7D5330B8565ECFF0EECEC1FC1CF64DA99156654C8A82D63246AB0D3B946F5886EC3813C570791F5FC1102238238FED24726E05321778F2D902FBD05E9FAE91621AA33A468A959A9A8A16A71672AAC623602A0926396EBF8A817EC5A03544F44DA27C37DD9F8174C228C91E0FA9BCCBD3C32924AE014AF590A707535A8A0638FB4B5135245F166186CD021CDD7D3A33C2E0FA5D9408BB33229DE09E47928CD91D061988E57C449DE63962CF2D7A85DFC828E539D1E6A4D8893DE2917078CE542F068D8C519D6B2C4E369DD8221C6186E2CAFE7A49C30DF5A1C6E058C350BCB7074DF3970E328D3CEC30F1C226EAE72DBB15CDBE79DB59732EC3F02A606A432D8D678F56733C73C90526D57044EB6C9ABB9BCC34E8DE6FC212955FD98125D5A52B755FE8B7E5BC489A281B96734D76C5F2166CB741EC33D91665CB6C5DA45AACBE5DDB275244058CB99B29F22928B51413DE36B0EE085FC95B8707AF83344324C1E309904781951749DD4C9DB50A1DEFB3C9AB56793A557FF2FFF2594D937622B979B2975B02BBC6138D88A79C3F4B8A46A60EC28CE4C18010A4AA57D05512EEA2B8C67BD78F27AF93EC70F2DB7C341F42CCC2E1BF984364922F58704CB31D2C893FB9F26998B49C0BEB241D4024F1904E70BCB419C9A2CE3A7791449579B39143F5F8694A611188C68E2F5ACC211439072C84A2C51C429140C042285AEC6860B301446AD86F87D4503680508457B55BF0AD8CF6E73857B65948401E77CF4940DE620E8106EFB34068A3852417C1F89C30174DE6308A587C1644D162A34F55780BAF5555AB39A432B28205533659F1A4887C17B85234DAC0A942DF794055EB640C7AE926F76BD195C7371B93AE0130944DEFD74E74B7F155E4300BA36A338752460EB340CA26731834109885421BCDE1D0C05E160E6DB4D02B26B297D32CA6DD82CFCCAB36C7EBF282685ABE173DDDF7A7AC620C640ECE484B5523A7E972D108436EDFAE1A2DB6BA3C6290DBEAF2163B088A4D8A69B610DD9520B22BABD1556C1E07A26AB4D9E6F2583B7E8FCB9B2C4C4C1E6AC7D997BCC51C027D55678190469D021FCD298CBF4F519803DD5385F56E2D8CAFDF996B8F5EE4364915B25EFFE021B3D6CC94AC9E01D22F75FE4E5981E846A7F655D29C4EBD24E9E914EFD4BA8A49F512612F20D5480BD1901F981B79CE3F684C512AF86792639787D6F6C2DE502CECA561F22662E2B641BA7617BBD00D8C5EBF0BD7ECCBF2CABBB9D29174075E74716698F697C023F7DFEBB70CC12817AA93F57FC22AD2A0EA700BE2600333F498FC06E33C9DF0BC7D99249AFE92655E38F95A4901E1436302906D1A244DE7895F40EA62C5FE2602AF7FEBA3F88687292425B1929EEA16752270AF3B0C336B293A9E3A3F2309869CC7DB3EC1BAD35AB225753A0162CBE474A6482E7D339846F550CE4605CABE9C4DB31629C480292AD3976809B56AFA02CB95A2790AECE7CA96A15113D5B5CA4C2719E3F20C3B4112AAC1B4E1955809A619C611D5D018C444F7A7D52AD3DC5579F8D2166D24822B6BA124EBDC9A2AA16A455F93158A52B4927FA920452C51F6AE65B5891ACF4786720C29F253F6858574F54EB0D814F4CE80FA33F7FB54F16E60F8F4EF8E3B1093D2DD46FFD874EE8E4797FD4D82A1CA599F57BA6AADC935AD992637DC9CA807E86E329A6D008FAEBD17CA5331DC99B0F1C2F32B9707E1F2E22B975B72B9AFC4B62272F9207966DA58E56EA975DDD2D734218C8327AC1927A9E9AE96C74F24352E11612763CA34615DA87FA79CD46393145D3096C2E2D585BD8C9AA16E50D4A0CD629A0889DF32DDBD87D2206366A31B972B9880340CB1274D5714C6B510869230AD3DA43180A40F6331B4D7A238A2E989B3296B706CC6C82CACA88D537F68D154C5054CDF9D9EAE601EC8796A2797D33299357155C7692CCF4C85F2EC4F612EA50538127B59134D778C96723A5239055B692E94D332967F34C772612A958B3F85AD9402518FC456FEB19CCAE908E5144CA5B94C8E6A2A85F061FAB62B96BB10D75F519D8BBD8DDFBF4EE8EEEB8BE0E10BC77B4AB09C140F1D4227B9FE88166F21F17AACC57715CE8AE316C84AA3AFC75676A89DA2A6F49012A90FEBCA9E69D1280A05354CCA989FAADE2A3AF6FD7C587A45ED093AB3A3E8AC89A4AA63272E2DEC885A348805E9A3118D83941C620541519543365135CF77353566A42D6792A5EAFA6006673C5449F13DB1A2B72A6C6D88565FB52B528CFB9B6C1F95D7FA58E361275A7F456E57C052937635CCFAD76F318D29A8C3B2AFAA7F66C73E7552D8A0766322CC138A521A16BD9C80BC9D99F24CF653FA629AB1ACD5A6A18E2765876499A5719B8A555B98B26C3114CB8C856C1A966C10865954A4945360F1897A179320E2E2D715CC027F0F6259FE9962F62C4DFBDCC49BA43AD80B14555DA49463043C92879DA260035C843F9384ECFCAF69FD02C21D24C93E4FD0BB89EF7768BB4378CA307A0AB90B02723550873F2FBBC9D3BCBCDFE67F8FA98F2960320312777D1F7FD805A147E9BE56842E6A40903B87321F80AC25227901FE1B857497C486804AF6D1AB9247186D430C2CBB8FD7E005EA696BE621CFB1E55500FC14442C078B169AA288313328300276C41E1FFE89C5D58B5EBFFF1D2DCCE7FD04870000, '4.3.1')
EXECUTE sp_rename @objname = N'ChatUsers', @newname = N'MessangerUsers', @objtype = N'OBJECT'
INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) VALUES ('201211241845003_RenameChatUsersToMessangerUsers', '2012-11-24T23:48:55.885Z', 0x1F8B0800000000000400ED1DDB6EE336F67D81FD07434FDD051A275E60900E9C161967D20DB6490671DA3E0E188956B4D5C52BD199E4DBF6613F697FA1A42E34AF12A99BE5765E06638A3C3C3C3C3792E79CFCFFBFFF5BFEF01A85B317986641125F386727A7CE0CC66EE205B17FE1ECD0E6DB73E787EFFFFA97E5472F7A9DFD52F55B907E78649C5D38CF086DDFCFE799FB0C23909D44819B2659B241276E12CD8197CC17A7A7E7F3B3D339C4201C0C6B365B3EEC62144430FF817FAE92D8855BB403E16DE2C1302BDBF197750E75760722986D810B2F9CF53348E115DC86C91BF44EAE000297AE0BB3CC995D8601C0F8AC61B8B144EEF43B829C43A7C5137FC408A2B7C7B72DCC27BF706EF11C20F661BA0A031823B633EEFE2FF8C635E0A64F69B285297A7B809B1204EEE4CCE6FCC0B938928E6307113C2E9C9B18FD63E1CCEE7661089E42DCB00161069DD9F6DDFB354A52F8238C610A10F43E0184608AF7E9C683F93A4A7ABCDFBE3323C977F3D30521C91CC4718200C29B2E612EE079E35568AE518AB9C7995D07AFD0FB09C63E7AA6A8DE82D7AA05FFD799FD1C0798D9F02094EE20BBB4E277FD943F810C5DBA2878C957584C8E19023E62D6BADF6C328814C4AA07F97306D34B9FECEFD88B21331BECB500E40EBC047EBE3F0A70CEEC0186F9C7EC39D816927122F0F1E7A2E3759A440F4928F379FEFDF33AD9A52E9EFD31A9E9F408529F909C457139DF0B929978E5F87C15AE8EC285A7E9C88FE4DFD185E09F207B1E7DD23508C71777B252C24B59F62549A7A53AAD95260176B7F37CE8D58132DA0A2C0EBBCC52078A8C9B205BC6ED2E2D979BDF0E32EF4D8667AE66FD9060E50C626B8A5D87C0B7C5BC2BDE54778ECCF81F231084A3CF8AB7C98B82B8EB46DD641FB0CDD88B99311CAD9B803DEF18BAD8AA15863CEBCF65A8BC815A97A1F22B4CD1BDFF8257FF639AECB60D98E67D3E93EE69A64495EDA0C795EB658BAC399E84167568E6DF9BB02C3AD922791986C9171B9A96039A5066BB3561CEF5552DC0DE8BCC017F75230733D42DBCC3EEC66E1526590BE52740794CB6816B89FB7957D47F8521DEBAF149F6290D5EC0DE2F696D7862EC28C21546A376050546CC02DE75DDF114022C3575F2A504D3A4EE4AED358CB6D31E966B34A3B1BD2E0862823AEDAAC5BAECD18470D5CD16D7CAFAF667A71B1015ACB9299E39141FD660EAC3CF85411131AC3EA82D1CFD6A6B948DD9D3CC7168209B9E13EDECAE0FBF1ADCC35F8AAE774FFFC61EFDE8F3121E3CC8A48739D1AD56E34F99C4E81037D337D91DFCD2D583F8F519C6A2D3D9F28EFE2149226B8FC0F2B6DDCEAB288D437BF3A1D4D09271E9E7EE1F83551EE0CB762D2ED677FC975996B8418E83F278C63B57FCDA3EC6DECCC2D32A04423690581276210AB661E062042F9CBF4B44349B889A77C54405316BE759CE195A5891A872E20C91963CBA010823BA83A634393D39399366C17E004C89390621566F194A411023D969086237D882D0082161B4A9D34176894E247EB9825B1813B7C188EC2618B0271B19113A9FE0173591AB3DA3952EB8210F88FEF8006C265ECD8D23795455D76229EB6D013B1F5AAF5C3E4A9812B567C11211194D9E44AA9A4C4C7D81C3C950654F9B769737AEBD300C7FD17E183D2CA03126B7B0143599973A7D5350B8565ECFF0EECEC1FC1CF64DA91157654C8A02D73246AB0D39946F5886E43813D970791F5FC1102238238FED24726E05321778F2D902FBD05E9FAE916219A33A468A9D9A9A8816A71672AAC623602A3126396EBF8A817EC5A03544F44DA27C37DD9F8174CC28F11E0FA9BCCBD3C32938AE014AF590A707536A8A0638FB4B5135245F666186CC021CDD7D3A33C2E0FA5DE408BB33225DE09E46128FD91D061988E57A4499E629624F2D7A85DF4828E539D1E6A4D8893CE2917078CA542F068D84519D6B2C4E369DC8221C6186A2CAFE7A49430DF5A1C6E058C360BCD7074DEB970E328D34ECB0F04227EAD72DBB15CDBE79DB55732EC3F02260AA432D95678F5A733C75C90526D55044EB6C9ABB9BCC32A8ED372189CAAFEC4092EAD295BA2FF4DB725E244D940DCBB926BB62790BB6DB20F6996C8BB265B62E522D56DFAEED1329A202C6DCCD14F914145B3A13361B587684AFE4ADC383D7419A2192E0F104C8A3C0CA8BA46EA6CE5A351DEFB3C9BB56793A557FF2FFF2594D937622B979B2975B02BBC60B8D88A79C3F4B8A4AA60EC28CE4C18010A4AA57D05512EEA2B8C67BD78F27AF93EC70F2DB7C341F42CCC2E1BF984364922F58704CB31D2C893EB9F06988B49C0BFB241D4024F6904E703CB719F1A24E3B77E144957AB3E143F5F86972611188C68E2F5ACC211439072C84A2C51C429140C042285AEC7060B301446CD86F8794503680508457B55BD0AD8CF6E72857B65970401E77CF7140DE620E8106EFB34068A3052717C1F81C33174DE6308A587C1644D162234F55780B2F5555AB39A432B28205533659D1A4887C17A85234DAC0A942DF794055EB64147AE926F7ABD195C7371B95AE0130944EEF574F74D7F155E4300BA36A338752460EB340CA26731834109885421BCDE1D0C05E160E6DB4902B26B297932CA6DD82CECCAB3647EBF282685ABE173DDDF727AC620C640ECE484A5523A7E972D10843CE6E578D16A62E8F18E44C5DDE62074161A498660BD65D092CBBB21A5DC5E67120AA461B3397C7DAF1362E6FB2503179A81DA75FF2167308F4559D05421A75027C34A730FE3E45A10E744F15D6D65A185F6F996B8F5EE4364915B25EFFE02193D64C95AC9E01D26F75FE4E5981E886A7F655D21C4F3D27E9F114EFD4BAB249F51261CF20D5480BD6901F981B69CE3F684C912BF8679263E787D6FAC25E512CECB961F22A62E2BA41BA7617BB500346AFDF856BF66579E5DD5CE948BA032FBA38338CFB4BE091FBEFF55B86609433D5C9FA3F6115695075B80571B081197A4C7E83719E4E78DEBE4C124D7FC9322F9C7CADA480D0A13101C8360D92A6F3C42F2075B1607F1381D7BFF5517CC3C318929258494F758B3A21B8971D8698B5181D4F9D9F911843CEE36D9F60DD692FD9923A9D00B165723A632497BE194CA27A2867A302655FCEA6598A146CC01495E98BB5845A357D81E54AD13C05F66B65CBD0A891EA5A65A6138F7179869D2009D560DAD04AAC04D30CE3886A680CA2A2FB936A956AEE2A3C7C698B361CC195B550A2756E8D9550B5A2AFC50A45295AF1BF54902296307BD7B2DA448DE72343398614F929FBC242BA7A27586C0A7A6740FDA9FB7DAA7837307CFA77470BC4A474B7913F369DBBE3D1657F93602872D6E795AE526B724D6B26C90D3727EA01BA9B8C661DC04FD7DE0BE5B118EE4CD878E1F995CA835079F195CA2DA9DC57625B11B97C903C336DAC72B7D4BA6EE96B9A10C6C113D68C93D47457CBE327921A9788B0E331659AB02ED4BF534EEAB1718A2E184BA1F1EAC25E46CD5037286AD066334D98C46F99EEDE43699031B3D18DCB154C801B86B049D3658571358421274CCB86340690F4A12C86F65A1447343D7236650D8E4D19998515B571EA0FCD9AAAB880E9BBD3D365CC03394FEDF8725A2AB326AEEA3895E59929539EFD29D4A5B40147A22F6BA2E98E51534E872BA7A02BCD99725ACAF28FE6582E4CB972F1A7D0955220EA91E8CA3F9653391DA69C82AA34E7C95155A5103E4CDF76C57217E2FE2BAA73B1B7F1FBD709DD7D7D113C7CE1784F09E693E2A143E824D71FD1CE5B70BC7ED6E2BB76CEB287C584A5E2D7CF5876A85DA6A6FC9072521FD6953EAB5999EDA28C69AAEAADC263DFCF87A567D41EA1333B8CCE9A508A5B6EBDA8C06C905A34B005E9A3618D83941D6219415199435653354F7835756624B333C972757D1083531EAAC4F89E48D15B25B63648ABAFDB1569C6FD2DB68FEA6B7DECF1B00BADBF26B72B62A949BD1A66FFEB4D4C631AEAB0E4AB6AA0D9914F9D1836A8DE9808F184C29486852F27C06F67A63493FD94BE8866CC6BB5A9A8E371D9214966A9DCA6A2D516A6245B0C453263269B86261B8460165529E534587CAADEC52490B8F87505B3C0DF8358967FAA983D4FD33E37F126A90EF70246551729ED18018FE462A728D80017E1CF24293BFF8B5ABF80700749C2CF13F46EE2FB1DDAEE105E328C9E42EE92805C0FD4CD9F97DEE4715EDE6FF3BFC9D4C712309A0189BDBE8F3FEC82D0A3785F2BC2173520C8BD43991340F61291DC00FF8D42BA4B62434025F9E875C9238CB6210696DDC76BF002F5B835D390A7D8F22A007E0A229682450B4D53C4333353E009D811FBF9F04FCCAE5EF4FAFDEF61D11DE008870000, '4.3.1')

CREATE TABLE [Applications] (
    [Key] [int] NOT NULL IDENTITY,
    [AppId] [nvarchar](max) NOT NULL,
    [MachineName] [nvarchar](max),
    [LastLoggedIn] [datetime],
    CONSTRAINT [PK_Applications] PRIMARY KEY ([Key])
)
CREATE TABLE [MesageResponse] (
    [Key] [int] NOT NULL,
    [ResponseText] [text] NOT NULL,
    [IsSent] [bit] NOT NULL,
    CONSTRAINT [PK_MesageResponse] PRIMARY KEY ([Key])
)
CREATE INDEX [IX_Key] ON [MesageResponse]([Key])
ALTER TABLE [Messages] ADD [App_Key] [int]
ALTER TABLE [Messages] ADD [ResponseKey] [int]
ALTER TABLE [Messages] ADD CONSTRAINT [FK_Messages_Applications_App_Key] FOREIGN KEY ([App_Key]) REFERENCES [Applications] ([Key])
CREATE INDEX [IX_App_Key] ON [Messages]([App_Key])
ALTER TABLE [MesageResponse] ADD CONSTRAINT [FK_MesageResponse_Messages_Key] FOREIGN KEY ([Key]) REFERENCES [Messages] ([Key]) ON DELETE CASCADE
INSERT INTO [__MigrationHistory] ([MigrationId], [CreatedOn], [Model], [ProductVersion]) VALUES ('201212121014540_AddAppAndResponseTables', '2012-12-12T10:15:53.089Z', 0x1F8B0800000000000400ED5DCD6EDC3812BE2FB0EFD0E8D3EE00E3B6BD409009DA33F0B49359639238707B26C7806ED16DEDA8A55E49EDD8CFB6877DA47D8525F5CB7F1545FD39E34B10B3A962B1F8B1AA58248BFFFBCF7F973F3DEE82D9038E133F0ACFE62747C7F3190E3791E787DBB3F921BDFBFEF5FCA71FFFFA97E55B6FF738FBBDAC774AEB912FC3E46C7E9FA6FB378B45B2B9C73B941CEDFC4D1C25D15D7AB489760BE4458BD3E3E3D78B93E3052624E684D66CB6BC3E84A9BFC3D91FE4CF55146EF03E3DA0E043E4E12029CAC92FEB8CEAEC23DAE1648F36F86CBEBE4731BEC0FB207AC2DED1054AD1F9668393643E3B0F7C44F859E3E0CE92B9E31F2873F3AA59D2F05BC260FA74F3B4C759E367F30FA40D146E71BC0A7C1CA66C6552FD57FCC41590A24F71B4C771FA748DEF0A12A4D27CB6E03F5C885F56DFB11F513ECEE69761FA8FD3F9ECE32108D06D400AEE5090E0F96CFFEACD3A8D62FC0B0E718C52EC7D42698A63324E971ECEFA51C8E3CDFE154C243F2C8E4FA94816280CA314A564D025CE053E2FBD92CD751A13F4CC67EFFC47ECBDC7E136BDAF58FD801ECB12F2DFF9ECB7D02760231FA5F101B35DCBFF3637F91E25E9F926F51FB21EE68D1340E01B02ADABBBBB04A70A619949FE96E0F87C4BC777E8CED09601632D10F9881EFC6D363E0A72F3D9350EB21F937B7F9FCF8C2301C75FF28AEFE268771D0532CEB3DFBFACA343BC21ADDF44864A3728DE5291B32C2E17F544824DAF8C9F97C9E538B948338E78A4FF0E3E09FE8992FBC11B5DA360F8E94E7B4AB194245FA3785AAAD35A6952621F0FDE167B2652A0A120D3E19058EA4011B8516A0B5CF7D9727EF7C728ED5E26A4E5B2D59F23A29C51682DB17701DADA72EECA77A53B0706FEDB1DF283C15B25C3E4EDFCD075A02E939F89CDA8A719988ED64D209E778837C4AAE5863CE9CE6528BD01A3CB50FA155076AFBE92DEFF1247877D03A7599D2FB47A9C2859652BE879E56AD9320BE793CAC2C466F67B139779255B26CF8320FA6A23D3E2832696D96A4D9C73756D3B708D9197D1DBE206FE33C4F1D515EC4BB5F4CEAF5CB51B173893CA8B0FDC9B97D1C2B575B7D4AB204A5A686E81CA4DB4F73796BCBF7665FD330EC8D00D2FB24FB1FF806AA7AAB5D50C89978B57840D630F728E980EBC721DF11823326B4CF34B49466FAC7382102D5D55D52AE8A2865EBBF1D5549A0D60570A33D18F5969605D69826C3C0D18E75027A3815BC11581F2D96CFAB6F84B6E50440ECB1FD4E6B9FAD5D62083871CE6F534884D3FBA7676778B5F0CEEF811DDF5E1F65F64393278BB1483A3343ACE7274B51ABEC9284CC708AB5F261FF157570FE2F33D0E45A7B3E50643A6B5AC5D02CBBD0250C46AEFCCC6354EF644C1E3EE3C9CC250B537654A6B2119BA6E365108596524A428D7F2A2DD2C69B4AA9FEF23BADCEC6799AB5DA4EB57C4606770BF0FFC4D61740CE2E4EAC952657ED60A97AD632BE312CF461EEB4A3283E56F5AEEAA0ADD040A5879BD782F12E63A766040FAFD03DADCFB211E65F78C4648DE47DB2DF62E2573D55E27AFC99081561916B357B7E250CD70179FBE9AAC139A1D309B7A831FBB7596801B0C6BC64983B94BBA31394F9268E36763A90C7056310A9EA3B7A13783052C72D9C80B4B22944390FA144984ADB3F97752AF1BDBA8F0A96823B7F97C13C7474727522B044A38A6FA0E05C4FB4DD218F9612AE3CE0F37FE1E05208684AFA1B8A583543524FE7281F738A47A19247608076CE04B66A46A4F985A4DE25A2E184459018D8B2D0191A00E34F50039F546091077DF8953B1AD888A2016906731A2D58358C49DB96104522D308C5CCAAB0D81BB2DB6EEB91C8C830AB563DD23323298CA11A50A69B85E4D8FA767CA6560D3F0F26BC24E10C36FB48F63AB043686840B2B5148BB55D86454B0E8176DF2002B57BC9D4047E98D2B10C439F57D0349C1D4907852481BD27C19491B15559A958E3CF0728CA2114F27A2189657E1050E708A67F40C21BD10B042C90679F2FA82AC0D3C30473A1C32EBB8DE21288A6748FC898270687B7827DBCABBEEDFAD1ECD9F96C3AF8D1C1B8E1CB5E31BDA8C7EC2F52018F6F06023AFCACB070A61149771DA884379581128EF4E35A25B9C40D18D41A3048A919A9A2F96C7A7E80E24F902C71230E9D6E4A378A32BFF688DD3EAFC567140B68E76E9C028618FA7549C7BD0D3C911D740A53CB1A92753A8D0063A7568574D692B435824C1F9887A7EB86A30AE6ABBAF63AEAE215064B02090559C92622A9BCF53896005472BAB0ED62327211F1C966488156012950CDF7B7BC9F0C7B11AC5A38FB059C7D89C04A50CA6F52FADF20858A39C5461368B409B936C84885A5F52A9F7E835D250C7D800513686E35A6935F55F8AAB35CAD0A1E3B9E2D6F75BF67D9A23456D7BCDF9353D0E36A7D5F55DD7463DC0718FB68250453A185A26ABD45E2AB559D28B44BD64872DDADB0A435A6BCB84B416D5594D42AD89A519E9D07E0C673814A7740C72695854DA2E2B9B3A66BB7E04A0D14556DCB5338394B42B4CF81A93E949E5F04364A35A4C3AC0A7DC53AFD62CD56FCB459E12A328582E34B933961FD07EEF875B26974651325BE7893456DFAFEDD364EC721A8B0D8740718555B5449C560206E1577A18D4C3EFFC384969FA8E5B4475CDCADB49D5A02BB4B2397EA1268F5AB98228EBD3FF17675C344945A4B59DBCB42D88BD231DDDD1E57176F2499C10260A339AE5040528561D255945C161171A96ECFAEFE9E927F673FA37FC6BFE82384B87FF054E9149ADC192638AED6849F2C9269F4648CB85304E52D441828714B6E1D106C2A2CE92B92051A5DE6C70A8FE7E9A28CC8FD1B1DFE725700A79460996425E02A790A7876029E425763CB0B91E446ED8DFC69CA1EC0D4B915E596E21B722970327B9A2CC02015956050E0159099C42959A812552155A20394FB5C081392F82D3C8332DB024F2129BF9549EA0E56755590AA7545C3D61C914455632C9F31A0852C90B6DE894890D784265E964147AB1A4E856A32BC321362A5D43A02F9DDEAD9E70D7F1E5D56A96465906A7525CAD66891445701AD54D69964A5508A753DD7C66E9548516F38AB9FACCCD2CA6DC42CECCB94E4ED645787A5ABE9761A9DC76B28A97443372A059AAFA729A2E57750593B3DB65A185A9CBAE5472A62E2BB1A3A030524CB1057457026457565F979717391265A18D99CB2E23F2362E2BB25031D95D444EBF6425700AF5A14996CA7514ED7433B8B36598D647DBCB0C91325B32DC8544AE73EC0F93D150E698B88B4761A06CE35718C9F4A5BE8A8B5B0214EC9418770B8BA5C4FD60E7F1D437AB449FA7FE6532D01263F95DDA401D51B82DD453E80B54FCB52A956AC87FB1D1E56BC9249465C3C3808F242BB0A0DBDAB75EA708DF9BD724C6A0138DA3ABB299980F08C8A2850166758F52BD8DCB8E659524DCF8D41EC282F3A937A17A3EC5DD04579894671AEC01527E69010DF93C5DA3CCF9A3115344057FE0E2B9E3A1B5BEB05714A7F66898BC8AF846748362DBDA76EF42F8DCB84FA1593B9BC4ADDDF56E2BF43602B765D11117E5E98ECE6121ED438B552ABFA6DA8F16F69D97C51E70F3C30ED2A6705E653E23BC3FF81EDD105E3F2529DE65C83A5AFF3B28CFDB96153EA0D0BFC3497A13FD81C32C01E1EBF6AF4254292792C40B26FF34844FE5D09874C3361B40953F237C40F186CCEEBFEDD0E3DFBBC835EE110EE90B205147CF34383158CF704698AD721EE8A131D6B306030143CEFCD93E25ABD358B22F083811625F0570E648CEF4DFDB8CEA207BBF8A947DF6FEE659A480019343BF2B6809A9F9BB22CB65DEBFF5EDFBCA66DD5733E59A54DF09635C6642274A42F2FB36B21213DF37D3784659B77B51D1DDCD6A956A769D3C7C32EC3688E012612BD97A6DCD9590E7BAABCE0A69AC5BE15F4A611D4A9CBD6A999FDAE0F9C8549E4352DD29FBC242825B275A6CD25A6742DDA9FB3AB9AC1B193E61ACA3056292C0B6997F6C0258C7A54B1D60024E39EBF50A30FBAB230545F2D78EB5C704325CF6A24AB8CC945A5CB7CD36E9BCB0103348C2FC86E79499B1CDCA44959731BB93E09662B13747D639F0D0100C577FA08B95360F0FDF5CFB71E2B9E82F9ED3B887F522E55EA47CFA22E55E62930EFEBA618344AE6CD8AA6816ACBD3014269365C055A65DA5BBC9AF368E927D467B99D12DE18E5B521BCD1D27902B30734863034E5DA3DB6A1B3EEF16388BB21DC69499D574F7A69D52783D37A4E86E6B28AC88E95CFCA0D90101496DDB0C260424DB96292B3BC89E3D64F23E505BA6C325934A57DB8FBE18070AC36A082012A660436C72D14AF9BBBAC8153B0978988FCA8F8B12ED158849A6961D3F956C9DBA66C414B243A2C870141FDCE6B8EF31284FE775E19BF4BD485244D9F4CC194DE733F77D6087FDDBC465C686A6EA54E6F457EFD305E6486BB576B89C828706BAEDF03C95E5091494277F0A75290DC033D197863B2ECF51534E079553D09570504E4B597E6B8EE5291495A77F0A5D295D0F7B26BAF2DB722AA703CA29A84A3826A7A22A61F7E4A68F4C76F35ACBD437196A6EB82439D9B833FC0AE4F4628C5342DC90A1C63658331CF5E8056EC255D5EA1CB1986B581C60C5CB23EC4987FAE487EE2C447E51F56CEEDD460410F92112A1929CFC59DB6EAE44F5ADE6BF1BDB54A79BD6B658B8B9FA268B0AC636358F29281BDD1A1E743134A34A2BAEED549B4769542D3315C0BDB379B646D35B53227EF3408281A4AAADE2A6AEB7C5C5DAB73D4327761C9D34B1D416EEA28B6AC3D42960FAD94C07C9669827BF71A2D00A8C5D95181825D33E8B4445326AD938180EA5A9A8681EDE727EB0A297F7A1BA1006A7B155B9603B1245678FF9B4615AEDFF899F2B303EEE033E5D8C71EF1DEDFED51E8DCDD527141C5F08DD3ED2036156F59DE82C0CF3168FF2ED35AB77DE347975FA99F966EFA631F35CBFE22B1F7CB1139F3AE74FAF166322C2135EB503BE9A3701BC9D406526BBC85D090D8C3563F6B9E15036A6C82C95DB54B4DA295464A77D890C0CB26968B27104A60DA05B3DE46681B72E84A75866EAB3EEF52A2C00C66041E2EE7CB11E0564F1A09B9C306FB9B83E84F40A76FED7054EFC6D4D6249688678C34543AB3A97E15D544666058ECA2AD2FDB814793475639CFA776893929F690E473FDCCE67BFA3E080696AA05B7A41FCEA90EE0F29E932DEDD065C889706774DED67AFD6F13C2FAFF65988AD8B2E10367D7A6BFD2AFCF9E0075EC5F73BC5C53E0D091A352EAEFCD3B14CE9D5FFED5345E96314020915E2AB82DD3778B70F08B1E42A5CA307ACE7AD5986BCC496173EDAC668C74A302F29538F20D232D3046980FDA26E8FFC49E0EAED1E7FFC3F948273C121B40000, '4.3.1')
